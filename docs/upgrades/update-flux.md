## Updating Flux

We're going to use `curl` so you'll want to be sure you have it installed

```bash
curl -V
```

If you don't have it installed, you can install it by running

```bash
yum install -y curl
```

Then we'll want to download the latest Flux binary by running (Assuming you can access the internet from your machine)

```bash
curl -s https://fluxcd.io/install.sh | sudo bash
```

Then we'll want to be sure it's installed properly by running

```bash
flux -v
```

This should return something similar to the following

```console
flux version 0.39.0
```

Next we'll need to locate our `gotk-components.yaml` file for flux in our git repo.  For example, mine lives in `components/management/flux-system/gotk-components.yaml`


```console
components
├── management
│   │── flux-system
│   │    └── gotk-components.yaml
```

One you locate `gotk-components.yaml` we'll patch it by using the following command

```bash
flux install --export > components/management/flux-system/gotk-components.yaml
```

After this file is updated, you can check to be sure it updated the correct file by running

```bash
git diff
```

You should see something like the following

```diff
diff --git a/components/management/flux-system/gotk-components.yaml b/components/management/flux-system/gotk-components.yaml
index 79576f0f..9c26b708 100644
--- a/components/management/flux-system/gotk-components.yaml
+++ b/components/management/flux-system/gotk-components.yaml
@@ -1,6 +1,6 @@
 ---
 # This manifest was generated by flux. DO NOT EDIT.
-# Flux Version: v0.38.3
+# Flux Version: v0.39.0
 # Components: source-controller,kustomize-controller,helm-controller,notification-controller
 apiVersion: v1
 kind: Namespace
@@ -8,7 +8,7 @@ metadata:
   labels:
     app.kubernetes.io/instance: flux-system
     app.kubernetes.io/part-of: flux
-    app.kubernetes.io/version: v0.38.3
+    app.kubernetes.io/version: v0.39.0
     pod-security.kubernetes.io/warn: restricted
     pod-security.kubernetes.io/warn-version: latest
   name: flux-system
@@ -23,7 +23,7 @@ metadata:
     app.kubernetes.io/component: notification-controller
     app.kubernetes.io/instance: flux-system
     app.kubernetes.io/part-of: flux
-    app.kubernetes.io/version: v0.38.3
+    app.kubernetes.io/version: v0.39.0
   name: alerts.notification.toolkit.fluxcd.io
:
```

if you see something other than the original `gotk-components.yaml` being updated, you might want to check the location of the file and try again.

Once this is updated, you can simply commit and push this up!

```bash
git add .
git commit -m "(flux): Upgraded flux to 0.39.0" # replace with your version
git push
```